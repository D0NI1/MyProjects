<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Namazi - Islamic Web App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            margin: 0;
            padding: 0;
            text-align: center;
        }
        header {
            background-color: #008080;
            color: white;
            padding: 20px;
            font-size: 24px;
        }
        .container {
            margin: 20px;
        }
        input[type="text"] {
            padding: 10px;
            margin: 10px 0;
            width: 60%;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        button {
            padding: 10px 20px;
            background-color: #008080;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }
        button:hover {
            background-color: #006666;
        }
        #prayerTimes, #qiblaDirection, #duaAzkar, #calendar, #hijriConverter {
            margin-top: 20px;
            padding: 20px;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        #prayerTimes ul {
            list-style: none;
            padding: 0;
        }
        #prayerTimes ul li {
            padding: 5px;
        }
        .result {
            font-size: 18px;
            margin-top: 10px;
        }
    </style>
</head>
<body>

<header>
    Namazi - Islamic Web App
</header>

<div class="container">
    <!-- Prayer Times Section -->
    <div id="prayerTimes">
        <h2>Prayer Times</h2>
        <input type="text" id="location" placeholder="Enter city or coordinates (e.g., Cairo)">
        <button onclick="getPrayerTimes()">Get Prayer Times</button>
        <ul id="timesList"></ul>
    </div>

    <!-- Qibla Direction Section -->
    <div id="qiblaDirection">
        <h2>Qibla Direction</h2>
        <button onclick="showQiblaDirection()">Find Qibla</button>
        <div id="qiblaResult"></div>
    </div>

    <!-- Dua and Azkar Section -->
    <div id="duaAzkar">
        <h2>Dua and Azkar</h2>
        <button onclick="showDuaAzkar()">Show Daily Dua & Azkar</button>
        <div id="duaResult"></div>
    </div>

    <!-- Islamic Calendar Section -->
    <div id="calendar">
        <h2>Islamic Calendar</h2>
        <p id="islamicDate"></p>
    </div>

    <!-- Hijri to Gregorian Converter Section -->
    <div id="hijriConverter">
        <h2>Hijri to Gregorian Converter</h2>
        <input type="text" id="hijriDate" placeholder="Enter Hijri Date (e.g., 01-01-1446)">
        <button onclick="convertToGregorian()">Convert to Gregorian</button>
        <p id="gregorianResult"></p>
    </div>
</div>

<script>
    // Prayer Times
    function getPrayerTimes() {
        let location = document.getElementById('location').value;
        fetch(`https://api.aladhan.com/v1/timingsByCity?city=${location}&country=Egypt&method=2`)
            .then(response => response.json())
            .then(data => {
                const prayerTimes = data.data.timings;
                document.getElementById('timesList').innerHTML = `
                    <li>Fajr: ${prayerTimes.Fajr}</li>
                    <li>Dhuhr: ${prayerTimes.Dhuhr}</li>
                    <li>Asr: ${prayerTimes.Asr}</li>
                    <li>Maghrib: ${prayerTimes.Maghrib}</li>
                    <li>Isha: ${prayerTimes.Isha}</li>
                `;
            })
            .catch(err => {
                alert("Could not fetch prayer times.");
            });
    }

    // Qibla Direction
    function showQiblaDirection() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(position => {
                const latitude = position.coords.latitude;
                const longitude = position.coords.longitude;

                // Qibla Direction calculation (simplified example)
                const qiblaAngle = calculateQibla(latitude, longitude);
                document.getElementById('qiblaResult').innerHTML = `Qibla Direction: ${qiblaAngle}Â°`;
            });
        } else {
            alert("Geolocation not supported.");
        }
    }

    function calculateQibla(lat, lon) {
        const qiblaLatitude = 21.4225;
        const qiblaLongitude = 39.8262;
        const angle = Math.atan2(Math.sin(qiblaLongitude - lon) * Math.cos(qiblaLatitude), 
                                 Math.cos(lat) * Math.sin(qiblaLatitude) - Math.sin(lat) * Math.cos(qiblaLatitude) * Math.cos(qiblaLongitude - lon));
        return (angle * 180 / Math.PI + 360) % 360;
    }

    // Dua and Azkar
    function showDuaAzkar() {
        document.getElementById('duaResult').innerHTML = `
            <p>1. SubhanAllah (Glory be to Allah) x33</p>
            <p>2. Alhamdulillah (Praise be to Allah) x33</p>
            <p>3. Allahu Akbar (Allah is the Greatest) x34</p>
        `;
    }

    // Islamic Calendar
    function getIslamicDate() {
        const today = new Date();
        const hijriDate = new Date(today.toLocaleDateString('en-US', { timeZone: 'Asia/Riyadh' }));
        document.getElementById('islamicDate').innerHTML = `Islamic Date: ${hijriDate.toLocaleDateString()}`;
    }

    getIslamicDate(); // Initial call to get the date

    // Hijri to Gregorian Converter
    function convertToGregorian() {
        const hijriDate = document.getElementById('hijriDate').value;
        // Example for demonstration, you'd ideally use a real API or algorithm to convert
        document.getElementById('gregorianResult').innerHTML = `Gregorian Date: ${hijriDate}`; 
    }
</script>

</body>
</html>
